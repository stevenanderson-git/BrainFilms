<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="{{url_for('static', filename='/js/add_new.js')}}"></script>
{% extends "layout.html" %}
    {% block content %}
    {% if loggedin %}
        <div class = 'add-video'>
            <div class=addh1>Add New Video</div>
            <div class=addh2>
            <form action = "{{url_for('add_new')}}" method = "post" autocomplete="off">
                <label for='video_url' class='video'>
                    Video URL: 
                </label>
                <input type="text" name='video_url' id="video_url" required placeholder="http://www..." class=video_box>

                <label for='video_title' class='video'>
                    Video Title:
                </label>
                <input type="text" name='video_title' id="video_title" required placeholder="Title goes Here" class=video_box>
            </div>
                <!--TODO: use jinja to make this block repeatable-->
                <div class = "form-row-label" for="categories">
                    Primary Category
                </div>
                <div class = "form-row-content">
                    <div class = "selector-categories-wraper">
                        <select class ="adv-form-selector categories" id = "category-selector" size = "6" onchange="filter_sub(this);">
                            {%for cat in categories%}
                                <option>{{cat.name}}</option>
                            {% endfor %} 
                        </select>
            <h1>Add New Video</h1>
            <form method="POST" id="addvideoform" name="addvideoform" autocomplete="off">
                {{addvideoform.csrf_token}}
                <label>Video Title:</label>
                {{addvideoform.video_title(class="form-control")}}
                <label>Video URL:</label>
                {{addvideoform.video_url(class="form-control")}}
                
                <div class="category-selectors">
                    <label>Choose a category for the video to belong to.</label>
                    <div class="primary-selector-div">
                        {{addvideoform.primaryselect(class="form-control", size=6)}}
                    </div>
                    <div id="choosesubdiv" hidden>
                        <label>Choose a subcategory?</label>
                        <input type="checkbox" id="showsubbool">
                        <div id="subcategorydiv" hidden>
                            <div class="secondary-selector-div">
                                {{addvideoform.secondaryselect(class="form-control", size=6)}}
                            </div>
                        
                            <div id="filterfurtherdiv" hidden>
                                <label>Filter Further?</label>
                                <input type="checkbox" id="filterfurtherbool">
                                <div id="tertiary-selector-div" hidden>
                                    {{addvideoform.tertiaryselect(class="form-control", size=6)}}
                                </div>
                            </div>
                        </div>
                    </div>
                    

                </div>
                {{addvideoform.videosubmitbutton(class="form-control")}}
            </form>
        </div>
    {% else %}
        <p><a href="{{ url_for('login') }}" class='comment-register-login'>Register or Login to Add New Videos</a></p>
    {% endif %}
    {% endblock content %}
